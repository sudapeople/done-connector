# Minecraft Chzzk / Soop 후원 연동 플러그인

## **지원 버전**
Java 버전: 21 이상, 17

※ Java 17 버전은 아래 다운로드에서 17버전을 다운받고 파일명에서 -jdk17을 제거 후 사용해주세요. 마인크래프트 1.20.4까지만 공식 지원 됩니다.

마인크래프트 서버 버전: Paper 1.20.x ~ 1.21.x (전체 테스트 통과)

## **실행 방법**

1. plugins 폴더에 done-connector-1.10.0.jar 파일을 넣고 마인크래프트 서버를 1회 실행 후 종료
2. plugins 폴더에서 done-connector/config.yml 파일 수정
3. 마인크래프트 서버 실행


## **사용 방법**

* 플러그인 적용 후 서버 실행 시, config.yml의 자동연결 설정에 따라 동작
* 자동연결 설정이 false(기본값)면 방송인이 서버에 접속할 때만 해당 채널 연결
* 자동연결 설정이 true면 서버 시작 시 모든 채널 자동 연결

### 명령어
* `/done [on|off|connect|reconnect|reload|add|list|autoconnect|test|ranking]` 명령어로 기능 제어
* `/done on` 후원자 연동 기능 활성화 (모든 채널 연결)
* `/done off` 후원자 연동 기능 비활성화 (모든 채널 연결 해제)
* `/done connect <플랫폼> <닉네임>` 특정 플랫폼의 특정 채널에 수동으로 연결. 플랫폼은 '치지직' 또는 '숲'
* `/done reconnect all` 전체 재접속
* `/done reconnect <닉네임>` 해당 닉네임 재접속, 컨피그에서 치지직/숲 바로 아래 단계의 닉네임 혹은 마크닉네임 입력, 자동완성은 마크닉네임만 지원
* `/done reload` 설정 파일 리로드 및 재접속
* `/done add <플랫폼> <방송닉> <방송ID> <마크닉>` 도네연결 임시 추가, reload가 어려운 상황에서 임시로 연결 추가. 서버 재기동시에 없어짐
* `/done list` 현재 설정된 채널 목록 확인
* `/done autoconnect` 자동 연결 기능 토글 (활성화/비활성화)
* `/done test <치지직/숲> <방송채널명> <후원금액>` 후원 테스트 실행. 방송채널명은 config.yml에 설정된 채널명을 사용하며, 후원금액은 자유롭게 입력 가능 (자동완성 지원: 1000, 3000, 5000, 10000, 50000, 100000)
* `/done ranking <스트리머 플레이어> [페이지]` 스트리머의 후원 랭킹 조회. 페이지 번호를 생략하면 1페이지가 표시됩니다. (자동완성 지원)

## **자동연결 설정**

config.yml 파일에 다음과 같이 설정:

```yaml
# 자동연결 설정
# - true: 서버 시작 시 모든 채널 자동 연결
# - false: 플레이어 접속 시에만 해당 플레이어 채널 연결
자동연결: false
```

* 기본값은 `false`로 설정되며, 이 경우 방송인 플레이어가 서버에 접속할 때만 해당 채널이 연결됩니다.
* 설정값을 `true`로 변경하거나 `/done autoconnect` 명령어를 사용하여 모든 채널을 자동으로 연결할 수 있습니다.

## **리소스 최적화**

* 자동연결을 `false`로 설정하면 실제 접속한 방송인의 채널만 연결되어 서버 리소스를 절약할 수 있습니다.
* 방송인이 서버에서 나갈 때 자동으로 해당 채널 연결이 해제됩니다.

## **후원 데이터 관리**

* 플러그인 실행 시 `plugins/done-connector/data/` 디렉토리가 자동으로 생성됩니다.
* 각 스트리머의 후원 데이터는 `{플레이어UUID}.yml` 파일로 저장됩니다.
* 실제 후원과 테스트 후원이 구분되어 저장되며, 랭킹 조회 시 테스트 후원은 제외됩니다.
* 후원 데이터에는 후원자명, 후원금액, 후원메시지, 플랫폼, 시간 등이 포함됩니다.

## **후원 랭킹 기능**

* `/done ranking <스트리머 플레이어> [페이지]` 명령어로 후원 랭킹을 조회할 수 있습니다.
* 페이지당 10명씩 표시되며, 후원금액 순으로 정렬됩니다.
* 1위는 금색, 2위는 은색, 3위는 동색으로 표시됩니다.
* 오프라인 플레이어의 랭킹도 조회 가능합니다.